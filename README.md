![Vite.js ><](./vite.js.png)
![Vue.js ><](./vue.js.png)
![Socket.IO ><](./socket.io.png)

# RequestDJ

The source code for the RequestDJ project, hosted at https://requestdj.onrender.com

## Introduktion

**Viktiga länkar:**

- [Vue.js](https://vuejs.org/) _(endast på klientsidan)_
- [Vue Router](https://router.vuejs.org/) _(endast på klientsidan)_
- [Vuex](https://vuex.vuejs.org/) _(endast på klientsidan)_
- [Express.js](https://expressjs.com/) _(endast på serversidan)_
- [Socket.IO](https://socket.io/) _(både på klient- och serversidan)_

**Ytterligare länkar som kan vara av intresse:**

- [Vue Devtools](https://devtools.vuejs.org/) _(endast på klientsidan)_
- [Vite.js](https://vitejs.dev/) _(endast på klientsidan)_
- [Bootstrap](https://getbootstrap.com/) _(endast på klientsidan)_
- [m.m.](https://www.npmjs.com/)

Om du vill köra koden lokalt: (För att köra koden krävs lokalt krävs att du hostar en egen lokal PostgreSQL databas, samt tillhandahåller en egen Spotify API key, skapa en .env fil i server som följer formatet på .env.exempel med korrekta värden)
När du installerat lokala databasen ändra "db:setup": "psql -U myuser -d myprojectdb -h localhost -f schema.sql" i filen package.json, till dina värden

1. Klona ned och navigera till repot i terminalen.

2. Kör `npm install` för att installera alla nödvändiga paket.<sup>[1](#1)</sup><br />
<span id="footnote1"><sup>[1](#1)</sup> Alla paket ska alltid installeras där de används, antingen i [client](./client/) eller [server](./server/). **Kommandot `npm install <package-name>` ska aldrig köras utanför dessa mappar.**</span>

3. Hosta en PostgreSQL databas med följande tables:

CREATE TABLE IF NOT EXISTS public.songrequests
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    song_title text COLLATE pg_catalog."default",
    song_artist text COLLATE pg_catalog."default",
    request_date timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    status text COLLATE pg_catalog."default" DEFAULT 'pending'::text,
    dj_username text COLLATE pg_catalog."default" NOT NULL,
    requester_session_id text COLLATE pg_catalog."default",
    requester_name text COLLATE pg_catalog."default",
    song_genre text COLLATE pg_catalog."default",
    song_spotify_id text COLLATE pg_catalog."default",
    CONSTRAINT songrequests_pkey PRIMARY KEY (id)
)


CREATE TABLE IF NOT EXISTS public.users
(
    name text COLLATE pg_catalog."default" NOT NULL,
    password text COLLATE pg_catalog."default" NOT NULL,
    spotify_access_token text COLLATE pg_catalog."default",
    spotify_refresh_token text COLLATE pg_catalog."default",
    CONSTRAINT users_pkey PRIMARY KEY (name)
)

4. Skapa en .env fil i mappen ./server/ med följande miljövariabler. (Fyll i värden där de saknas)
SPOTIFY_CLIENT_ID='' 
SPOTIFY_CLIENT_SECRET=''
SPOTIFY_REDIRECT_URI='http://localhost:8989/api/spotifycallback'
PG_HOST=''
PG_PORT='5432'
PG_DATABASE=''
PG_USER=''
PG_PASSWORD=''

5. Kör `npm start` för att starta servern.<sup>[2](#2)</sup>

6. Öppna webbläsaren och navigera till [localhost:8989](http://localhost:8989/).



<span id="footnote1"><sup>[2](#2)</sup> Vid detta tillfälle är Vue-applikationen klar att serveras.</span>